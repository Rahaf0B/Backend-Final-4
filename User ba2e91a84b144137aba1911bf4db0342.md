# User

**The main-Rout ‚áí Host+/auth**

**ALL the following routes should start with /auth**

‚áí **[http://158.176.1.165:3000](http://158.176.1.165:3000/)/auth**

**The description of the parameters in the routes are in :**

[Description for the parameters and query and the body in the routes](Description%20for%20the%20parameters%20and%20query%20and%20the%20b%20163650cd02b04a1ea09769b0e4f7f5f4.md)

<aside>
üì¢ **ALL the routes below except /register and /login need to send session-token in the cookies**

**example ‚áí  ‚Äúsession-token=d7bdf711-9abe-4355-9bf0-7a377ed4f8dd‚Äù**

</aside>

---

## Create Account

Method ‚áí POST

```jsx
"/register"
```

send a body with the requestt

he body ‚áí

```
{
    "email":"",
    "first_name":"",
    "last_name":"",
    "password":""
}
```

The response ‚áí

- status 400
    - for the input validation
    - if the email has been used before with massage ‚áí email must be unique
        
        ![Untitled](Untitled.png)
        
- status 500 if server error happened
- status 200 it will
    
     return ‚áí true
    
    and it will set a session-token in the cookies 
    
    ![Untitled](Untitled%201.png)
    

---

## Login

Method ‚áí POST

```jsx
"/login"
```

send a body with the request

the body ‚áí

```
{
    "email":"",
    "first_name":"",
    "last_name":"",
    "password":""
}
```

The response ‚áí

- status 400
    - for the input validation
    - if the email or the password or both are wrong it will return  ‚áí Invalid Data Try Again
    
    ![Untitled](Untitled%202.png)
    
- status 200 it will
    
    return ‚áí true
    
    and it will set a session-token in the cookies 
    
    ![Untitled](Untitled%201.png)
    

---

## Edit user info

Method ‚áí patch

```jsx
"/editInfo"
```

send a body with the request

the body ‚áí

should have at least one of the parameters ( ‚Äúphone_number‚Äù , ‚Äúemail‚Äù, ‚Äúfirst_name‚Äù, ‚Äúlast_name‚Äù,‚Äùdate_of_birth‚Äù)

```json

 {
"phone_number":",
"email":"",
"first_name":"",
"last_name":"",
"date_of_birth":""
}
```

The response ‚áí

- status 400
    - for the input validation
    - if the email or the password or both are wrong it will return  ‚áí Invalid Data Try Again
    
    ![Untitled](Untitled%202.png)
    
    - Status 200 it will return the data of the user:
    
    ![Untitled](Untitled%203.png)
    

---

## Upload image or edit image of the user

Method => POST

Content-Type: multipart/form-data

the image file should be jpg or jpeg

Content-Disposition: form-data; name="images"; 

Content-Type: image/png

```json
"/upload-image"
```

The response ‚áí

- status 400
    - for the input validation
- Status 500 for server error
- status 200
    - will return the url of the image
    
    ![Untitled](Untitled%204.png)
    

---

## Delete User Image

Method ‚áí DELETE

```jsx
"/delete-image"
```

The response ‚áí

- status 400
    - for the input validation
- Status 500 for server error
- status 200 will return true

---

## Get User Info

Method ‚áí GET

```jsx
"/user-info"
```

The response ‚áí

- Status 500 for server error
- status 200 will return user info
    
    ```json
    {
        "date_of_birth": "2000-03-05",
        "first_name": "Isabella",
        "last_name": "Scott",
        "email": "cosmic_explorer78@emailservice.com",
        "phone_number": 8662565435
    }
    ```
    

---

## Change Password

Method ‚áí Patch

```jsx
"/change-password"
```

send a body with the request

body ‚áí

```jsx
{
     "old_password":"",
      "new_password":"",
       "confirm_password":""
}
```

The response ‚áí

- Status 500 for server error
- Status 400:
    - for input validation
    - when the old-password is wrong ‚áí it will return ‚áí Invalid password
    - when the new password and the confirm password are not equal ‚áí it will return ‚áí NewPass and the confirm pass are not the same
- status 200 and will clear the session-token in the cookies

---

## ADD Review to a product

method ‚áí POST

```jsx
"/add-reviews"
```

send a body with the request

body ‚áí

```jsx
{
"comment":"",
"rating_value":x,
"product_id":x
}
```

change x to a number

- Status 500 for server error
- Status 400:
    - for input validation
    - when the product is not found it will return ‚áí product not found
- status 200 it will return ‚áí

```jsx
{
    "date": "2024-01-29",
    "rating_value": 2,
    "product_id": 5,
    "comment": "this product is so good"
}
```

---

## Get User Reviews

Method‚áí GET

```json
"/reviews"
```

<aside>
üì¢ Note the user can add just one review in a product when attempt to add another reviews it will not add the review or edit the old one and it will return status 200 and with the old added review

</aside>

Response:

- Status 500 for server error
- status 200 it will return:
    
    ```json
    [
       
        {
    				"product_id": 2,
            "rating_id": 335,
            "comment": "Sleek and modern design. A must-have for those who appreciate aesthetics.",
            "rating_value": 2
        },
        {
    				"product_id": 4,
            "rating_id": 344,
            "comment": "Attention-grabbing design. Perfect for those who appreciate unique products.",
            "rating_value": 5
        },
        {
    				"product_id": 5,
            "rating_id": 350,
            "comment": "this product is so good",
            "rating_value": 2
        }
    ]
    ```
    

---

## Logout

Method‚áí POST

```jsx
"/logout"
```

- Status 500 for server error
- status 200 ‚áí will clear the session token in the cookies